# 옵셔널 반환은 신중히하라

### 자바 8 이전에 값을 반환할 수 없을때는
+ 예외를 던지거나
+ null을 반환했다.

### 자바 8 이후, Optional등장
+ Optional을 반환하는 메서드는 예외를 던지는 메서드보다 유연하고 사용하기 쉽다.
+ null을 반환하는 메서드보다 오류 가능성이 작다.

### Optional을 반환하는 메서드에서는 절대 null을 반환하지 말 것
+ Optional을 도입한 취지를 완전히 무시하는 행위

### Optional을 반환하는이유?
+ 클라이언트에게 반환값이 없을 수도 있음을 명확히 알려준다.

### 메서드가 옵셔널을 반환하면 클라이언트는 값을 받지 못했을때 취할 행동을 선택해야한다.
+ 기본 값 설정
  + Optional.orElse
  + Optional.orElseGet - Supplier를 사용하는거라, 연산을 늦출 수 있어서 이걸 사용하는것이 좋다.
+ 원하는 예외 던지기
  + Optional.orElseThrow
+ 값이 하상 채워져 있다고 가정한다면?
  + Optional.get
  + 그러나 이것은 값이 없을경우 NoSuchElementException 발생
+ 이 셋중 없으면 isPresent를 사용해야한다.
  + 근데, 이걸 꼭 사용해야하는것은 잘 생각을해봐야함. nullCheck하는거랑 별다를게 없다.
+ Optional의 map, flatMap을 잘 사용하면 좋다.

### 컬렉션, 스트림, 배열, 옵셔널 같은 컨테이너 타입은 옵셔널로 감싸면 안된다.
+ 이미 비어있음을 알 수 있는 empty(), length, size() 같은 것들이 존재한다.

### Optional을 사용해야하는 경우
+ 결과가 없을 수 있으며, 클라이언트가 이 상황을 특별하게 처리해야한다? -> `Optional<T>`반환

### Optional 반환은 성능저하가 뒤따르니, 성능이 중요시된다면 null을 반환하거나 예외를 던지는편이 나을 수 있다.